<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"/>
  <meta name="format-detection" content="telephone=no"/>
  <title>–ó–∞–ø–∏—Å –¥–æ —Å–∞–ª–æ–Ω—É –∫—Ä–∞—Å–∏</title>
  <style>
    :root{
      --brand:#18c7c4;              /* –±—ñ—Ä—é–∑–æ–≤–∏–π (–ø—ñ–¥ –∫–æ–ª—ñ—Ä –ª–æ–≥–æ—Ç–∏–ø—É) */
      --brand-dark:#12a5a2;
      --text:#0b1b1b;
      --onbrand:#ffffff;
      --glass:rgba(255,255,255,.12);
      --border:rgba(255,255,255,.22);
      --radius:22px;
      --shadow:0 14px 40px rgba(0,0,0,.35);
      --vh:1vh;
      --field-h:52px;               /* –æ–¥–Ω–∞–∫–æ–≤–∞ –≤–∏—Å–æ—Ç–∞ –ø–æ–ª—ñ–≤ */
    }
    *{box-sizing:border-box}
    html,body{height:100%; overscroll-behavior:none; -webkit-text-size-adjust:100%;}
    body{
      margin:0; font-family:Arial,Helvetica,sans-serif; font-weight:700; color:#0d2222;
      overflow:hidden;                                           /* –±–µ–∑ —Å–∫—Ä–æ–ª—É */
      background:
        radial-gradient(1200px 1200px at 10% -10%, rgba(255,255,255,.25), transparent 55%),
        radial-gradient(900px 900px at 120% 120%, rgba(255,255,255,.18), transparent 60%),
        linear-gradient(180deg, var(--brand) 0%, #11b6b2 100%);  /* –±—ñ—Ä—é–∑–æ–≤–∏–π —Ñ–æ–Ω */
    }
    /* –ª–µ–≥–∫–∞ –∑–µ—Ä–Ω–∏—Å—Ç—ñ—Å—Ç—å */
    body::after{
      content:""; position:fixed; inset:0; pointer-events:none; z-index:0;
      background-image:radial-gradient(rgba(255,255,255,.08) 1px, transparent 1px);
      background-size:4px 4px; opacity:.35; mix-blend-mode:soft-light;
    }

    /* –õ–æ–≥–æ—Ç–∏–ø –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º safe-area */
    .logo{
      position:fixed; z-index:10;
      top:calc(env(safe-area-inset-top,0px) + 10px);
      left:calc(env(safe-area-inset-left,0px) + 12px);
      padding:8px 10px; border-radius:14px;
      background:rgba(0,0,0,.12); border:1px solid rgba(255,255,255,.25);
      backdrop-filter:blur(8px) saturate(130%);
      display:flex; align-items:center; gap:10px;
    }
    .logo img{height:40px; width:auto; display:block; border-radius:8px}
    .logo span{color:#023737; text-shadow:0 1px 0 rgba(255,255,255,.35)}

    /* –ü—Ä–µ–ª–æ–∞–¥–µ—Ä */
    #loader{position:fixed; inset:0; display:grid; place-items:center; z-index:999;
      background:linear-gradient(135deg, rgba(0,0,0,.35), rgba(0,0,0,.25)); transition:opacity .4s, visibility .4s}
    #loader.hide{opacity:0; visibility:hidden}
    .ring{width:86px; height:86px; border-radius:50%;
      background:conic-gradient(from 0deg, #ffffff, rgba(255,255,255,.1), #ffffff);
      -webkit-mask: radial-gradient(circle 34px, transparent 31px, #000 32px);
              mask: radial-gradient(circle 34px, transparent 31px, #000 32px);
      animation:spin 1.1s linear infinite; filter:drop-shadow(0 8px 22px rgba(0,0,0,.35))}
    @keyframes spin{to{transform:rotate(1turn)}}

    /* –¶–µ–Ω—Ç—Ä—É—é—á–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    .wrap{
      position:fixed; inset:0; z-index:1;
      display:grid; place-items:center;
      height:calc(var(--vh) * 100);
      padding:22px;
      padding-left:max(22px, env(safe-area-inset-left));
      padding-right:max(22px, env(safe-area-inset-right));
      padding-top:max(22px, env(safe-area-inset-top));
      padding-bottom:max(22px, env(safe-area-inset-bottom));
    }

    /* –ö–∞—Ä—Ç–æ—á–∫–∞ */
    .card{
      width:min(980px, 100%);
      background:rgba(255,255,255,.22);
      border:1px solid rgba(255,255,255,.35);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      backdrop-filter:blur(14px) saturate(140%);
      padding:26px;
    }
    h1{margin:0 0 6px; font-size:36px; line-height:1.15; color:#062f2f}
    .subtitle{margin:0 0 18px; font-size:16px; color:#0c3d3d}
    .chip{display:inline-block; padding:4px 10px; border-radius:999px; font-size:14px;
      background:#0e7e7c; color:var(--onbrand); letter-spacing:.2px}

    /* –û–ø–∏—Å + —Ñ–æ—Ä–º–∞ —É –¥–≤—ñ –∫–æ–ª–æ–Ω–∫–∏ */
    .grid{display:grid; grid-template-columns:1.1fr 1fr; gap:22px}
    @media (max-width:860px){ .grid{grid-template-columns:1fr; } }

    .desc{
      background:rgba(255,255,255,.18); border:1px solid rgba(255,255,255,.35);
      border-radius:18px; padding:16px 16px 14px;
      color:#073838; font-weight:700;
    }
    .desc ul{margin:8px 0 0 18px; padding:0}
    .desc li{margin:6px 0}

    /* –§–æ—Ä–º–∞ */
    .form{display:grid; grid-template-columns:1fr 1fr; gap:16px}
    .form .wide{grid-column:1/-1}

    label{display:block; margin-bottom:6px; color:#073838}
    input, select{
      width:100%; height:var(--field-h);
      font:700 16px/1 Arial, Helvetica, sans-serif; color:#082d2d;
      background:#ffffff; border:1px solid rgba(0,0,0,.08);
      border-radius:14px; padding:0 14px; outline:none;
      box-shadow:inset 0 1px 0 rgba(0,0,0,.04);
      transition:border-color .15s, box-shadow .15s, transform .02s;
      appearance:none;
    }
    input::placeholder{color:#6b8b8b; font-weight:700}
    input:focus, select:focus{border-color:#0c7f7c; box-shadow:0 0 0 3px rgba(24,199,196,.25)}
    .select-wrap{position:relative}
    .select-wrap::after{content:"‚ñæ"; position:absolute; right:12px; top:50%; translate:0 -50%; color:#0b5252; pointer-events:none; font-size:16px}
    option{color:#0b1b1b; background:#fff; font-weight:700}

    .info{margin-top:6px; color:#0a3b3b; font-size:14px}
    .btn{
      display:inline-grid; place-items:center; width:100%;
      padding:14px 16px; border-radius:14px; border:1px solid rgba(0,0,0,.04);
      background:linear-gradient(135deg, var(--brand), var(--brand-dark));
      color:#003b3a; text-shadow:0 1px 0 rgba(255,255,255,.45);
      font-size:16px; letter-spacing:.2px; cursor:pointer;
      box-shadow:0 10px 26px rgba(0,0,0,.22);
      transition:transform .06s, filter .18s}
    .btn:hover{filter:brightness(1.05)}
    .btn:active{transform:translateY(1px)}

    .toast{position:fixed; right:18px; bottom:18px; z-index:50; background:rgba(0,0,0,.65); color:#fff;
      border:1px solid rgba(255,255,255,.28); border-radius:14px; padding:12px 14px; box-shadow:var(--shadow);
      opacity:0; translate:0 14px; transition:all .25s ease}
    .toast.show{opacity:1; translate:0 0}

    /* –ö–æ–º–ø–∞–∫—Ç –¥–ª—è –≤—É–∑—å–∫–∏—Ö/–Ω–∏–∑—å–∫–∏—Ö –µ–∫—Ä–∞–Ω—ñ–≤ */
    @media (max-width:480px){
      .logo{padding:6px 8px}
      .logo img{height:34px}
      .card{padding:18px; border-radius:18px}
      h1{font-size:28px}
      :root{ --field-h:50px; }
    }
    @media (max-height:640px){
      :root{ --field-h:46px; }
      .card{padding:16px}
      h1{font-size:26px}
    }
  </style>
</head>
<body>
  <!-- –ü—Ä–µ–ª–æ–∞–¥–µ—Ä -->
  <div id="loader"><div class="ring" aria-label="loading"></div></div>

  <!-- –õ–æ–≥–æ—Ç–∏–ø –∑–ª—ñ–≤–∞ –≤–≥–æ—Ä—ñ -->
  <div class="logo" aria-label="–õ–æ–≥–æ—Ç–∏–ø —Å–∞–ª–æ–Ω—É">
    <img src="https://i.ibb.co/XvhJ4cX/a03f570e-30a1-4075-9164-39ef3d7dde2d.png" alt="Logo">
    <span><b>–í–∞—à –ø—Ä–æ—Å—Ç—ñ—Ä –∫—Ä–∞—Å–∏</b></span>
  </div>

  <!-- –¶–µ–Ω—Ç—Ä–æ–≤–∞–Ω–∞ —Å–µ–∫—Ü—ñ—è -->
  <main class="wrap">
    <section class="card">
      <h1>–û–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å <span class="chip">—à–≤–∏–¥–∫–æ —Ç–∞ –∑—Ä—É—á–Ω–æ</span></h1>
      <p class="subtitle">–ú–∞–Ω—ñ–∫—é—Ä ‚Ä¢ –ü–µ–¥–∏–∫—é—Ä ‚Ä¢ –ë—Ä–æ–≤–∏ ‚Ä¢ –†–µ—Å–Ω–∏—Ü—ñ ‚Ä¢ –ú–∞—Å–∞–∂ ‚Äî <b>–∑–µ–∫–æ–Ω–æ–º–∏–º–æ –≤–∞—à —á–∞—Å</b> —ñ —Å—Ç–≤–æ—Ä–∏–º–æ –Ω–∞—Å—Ç—Ä—ñ–π ‚ú®</p>

      <div class="grid">
        <!-- –û–ø–∏—Å -->
        <div class="desc">
          –ú–∏ –ø—Ä–∞—Ü—é—î–º–æ –≤ 4‚Äì6 —Ä—É–∫, —Ç–æ–∂ –ª–µ–≥–∫–æ –ø—ñ–¥–±–µ—Ä–µ–º–æ –∑—Ä—É—á–Ω–∏–π —á–∞—Å.  
          <ul>
            <li>–ë—ñ—Ä—é–∑–æ–≤–∞ –∑–æ–Ω–∞ –∫–æ–º—Ñ–æ—Ä—Ç—É ‚Äî —á–∏—Å—Ç–æ—Ç–∞, —Å—Ç–µ—Ä–∏–ª—å–Ω—ñ—Å—Ç—å, —Ç—É—Ä–±–æ—Ç–∞</li>
            <li>–ê–¥—Ä–µ—Å–∞: –ö–∞–º–∞–Ω—ñ–Ω–∞ 16–∞/4, –û–¥–µ—Å–∞ (65019)</li>
            <li>–ó–∞–ø–∏—Å –æ–Ω–ª–∞–π–Ω –Ω–∏–∂—á–µ ‚Äî –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –æ–¥—Ä–∞–∑—É –≤ –±—Ä–∞—É–∑–µ—Ä—ñ</li>
          </ul>
        </div>

        <!-- –§–æ—Ä–º–∞ -->
        <form id="bookForm" class="form" autocomplete="off">
          <div class="field wide">
            <label for="name">–Ü–º'—è</label>
            <input id="name" type="text" placeholder="–í–∞—à–µ —ñ–º'—è" required>
          </div>

          <div class="field wide">
            <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω (–º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç)</label>
            <input id="phone" type="tel" inputmode="tel" placeholder="+380..." required>
          </div>

          <div class="field">
            <label for="service">–ü–æ—Å–ª—É–≥–∞</label>
            <div class="select-wrap">
              <select id="service" required></select>
            </div>
            <div id="serviceInfo" class="info"></div>
          </div>

          <div class="field">
            <label for="master">–ú–∞–π—Å—Ç–µ—Ä</label>
            <div class="select-wrap">
              <select id="master" required>
                <option value="kateryna">–ö–∞—Ç–µ—Ä–∏–Ω–∞ ‚Äî –º–∞–Ω—ñ–∫—é—Ä/–±—Ä–æ–≤–∏</option>
                <option value="olena">–û–ª–µ–Ω–∞ ‚Äî –ø–µ–¥–∏–∫—é—Ä/—Ä–µ—Å–Ω–∏—Ü—ñ</option>
                <option value="igor">–Ü–≥–æ—Ä ‚Äî –º–∞—Å–∞–∂</option>
              </select>
            </div>
          </div>

          <div class="field">
            <label for="date">–î–∞—Ç–∞</label>
            <input id="date" type="date" required>
          </div>

          <div class="field">
            <label for="time">–ß–∞—Å</label>
            <div class="select-wrap">
              <select id="time" required></select>
            </div>
          </div>

          <div class="wide">
            <button class="btn" type="submit">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∑–∞–ø–∏—Å</button>
          </div>
          <div id="summary" class="info wide" style="margin-top:6px"></div>
        </form>
      </div>
    </section>
  </main>

  <div id="toast" class="toast">–ì–æ—Ç–æ–≤–æ!</div>

  <script>
    /* –§—ñ–∫—Å–∞—Ü—ñ—è vh ‚Äî –±–µ–∑ ¬´—Å—Ç—Ä–∏–±–∞–Ω—å¬ª –ø—Ä–∏ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä—ñ */
    (function lockVh(){
      const vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty('--vh', `${vh}px`);
    })();

    /* –î–∞–Ω—ñ (–¥–µ–º–æ) */
    const SERVICES=[
      {id:"mani",   name:"–ú–∞–Ω—ñ–∫—é—Ä –∫–ª–∞—Å–∏—á–Ω–∏–π üíÖ",  duration_min:60, price:600},
      {id:"gel",    name:"–ü–æ–∫—Ä–∏—Ç—Ç—è –≥–µ–ª—å-–ª–∞–∫–æ–º üíñ", duration_min:75, price:800},
      {id:"pedi",   name:"–ü–µ–¥–∏–∫—é—Ä üë£",             duration_min:70, price:700},
      {id:"brows",  name:"–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –±—Ä—ñ–≤ üëÅÔ∏è",   duration_min:45, price:500},
      {id:"lashes", name:"–ù–∞—Ä–æ—â–µ–Ω–Ω—è —Ä–µ—Å–Ω–∏—Ü—å ‚ú®",    duration_min:90, price:1100},
      {id:"massage",name:"–ú–∞—Å–∞–∂ —Ä–µ–ª–∞–∫—Å üíÜ‚Äç‚ôÄÔ∏è",      duration_min:60, price:900},
    ];
    const MASTERS={
      kateryna:"–ö–∞—Ç–µ—Ä–∏–Ω–∞ ‚Äî –º–∞–Ω—ñ–∫—é—Ä/–±—Ä–æ–≤–∏",
      olena:"–û–ª–µ–Ω–∞ ‚Äî –ø–µ–¥–∏–∫—é—Ä/—Ä–µ—Å–Ω–∏—Ü—ñ",
      igor:"–Ü–≥–æ—Ä ‚Äî –º–∞—Å–∞–∂"
    };
    const TIME_SLOTS=["10:00","11:30","13:00","15:00","16:30","18:00"];
    const KEY_ALL="demo_bookings_all_teal", KEY_MINE="demo_bookings_mine_teal";

    const $=s=>document.querySelector(s);
    function toast(t){const el=$("#toast"); el.textContent=t; el.classList.add("show"); setTimeout(()=>el.classList.remove("show"),2200)}
    function readAll(){try{return JSON.parse(localStorage.getItem(KEY_ALL)||"[]")}catch{return[]}}
    function writeAll(a){localStorage.setItem(KEY_ALL,JSON.stringify(a))}
    function readMine(){try{return JSON.parse(localStorage.getItem(KEY_MINE)||"[]")}catch{return[]}}
    function writeMine(a){localStorage.setItem(KEY_MINE,JSON.stringify(a))}
    function todayISO(){return new Date().toISOString().slice(0,10)}
    const fmtUAH=n=>`${n} –≥—Ä–Ω`;

    /* –ü—Ä–µ–ª–æ–∞–¥–µ—Ä */
    window.addEventListener("load",()=>setTimeout(()=>$("#loader").classList.add("hide"),350));

    const serviceSel=$("#service"), serviceInfo=$("#serviceInfo"),
          masterSel=$("#master"), dateInp=$("#date"), timeSel=$("#time"),
          phoneInp=$("#phone"), nameInp=$("#name"), summary=$("#summary");

    /* –ü–æ—Å–ª—É–≥–∏ */
    SERVICES.forEach(s=>{
      const o=document.createElement("option");
      o.value=s.id; o.textContent=`${s.name} ‚Äî ${fmtUAH(s.price)}`;
      serviceSel.appendChild(o);
    });
    function updateServiceInfo(){
      const s=SERVICES.find(x=>x.id===serviceSel.value);
      serviceInfo.textContent=s?`–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å: ${s.duration_min} —Ö–≤ ‚Ä¢ –í–∞—Ä—Ç—ñ—Å—Ç—å: ${fmtUAH(s.price)}`:"";
    }
    serviceSel.addEventListener("change",updateServiceInfo); updateServiceInfo();

    /* –î–∞—Ç–∞/—á–∞—Å */
    dateInp.value=todayISO();
    function generateSlots(dateISO){
      const busy=new Set(readAll().filter(b=>b.date===dateISO).map(b=>`${b.time}-${b.master}`));
      timeSel.innerHTML="";
      TIME_SLOTS.forEach(t=>{
        const key=`${t}-${masterSel.value}`;
        const opt=document.createElement("option");
        opt.value=t; opt.textContent=t;
        if(busy.has(key)){opt.disabled=true; opt.textContent=`${t} ‚Äî –∑–∞–π–Ω—è—Ç–æ`;}
        timeSel.appendChild(opt);
      });
      const free=[...timeSel.options].find(o=>!o.disabled);
      if(free) timeSel.value=free.value;
    }
    generateSlots(dateInp.value);
    masterSel.addEventListener("change",()=>generateSlots(dateInp.value));
    dateInp.addEventListener("change",()=>generateSlots(dateInp.value));

    /* –¢–µ–ª–µ—Ñ–æ–Ω —É —Ñ–æ—Ä–º–∞—Ç—ñ E.164 */
    phoneInp.addEventListener("input",()=>{
      let v=phoneInp.value.replace(/[^\d+]/g,"");
      if(v[0]!=="+") v="+"+v.replace(/\+/g,"");
      v="+"+v.slice(1).replace(/\D/g,"");
      phoneInp.value=v;
    });
    const validPhone=v=>/^\+\d{10,15}$/.test(v);

    /* –°–∞–±–º—ñ—Ç */
    $("#bookForm").addEventListener("submit",e=>{
      e.preventDefault();
      const name=nameInp.value.trim();
      const phone=phoneInp.value.trim();
      if(!validPhone(phone)){toast("–ù–µ–≤—ñ—Ä–Ω–∏–π –Ω–æ–º–µ—Ä: —Ñ–æ—Ä–º–∞—Ç +XXXXXXXXXX"); phoneInp.focus(); return;}
      const srv=SERVICES.find(s=>s.id===serviceSel.value);
      const master=masterSel.value, date=dateInp.value, time=timeSel.value;

      const rec={id:Date.now().toString(36), name, phone,
        service_id:srv.id, service_name:srv.name, price:srv.price,
        master, master_name:MASTERS[master], date, time, created_at:new Date().toISOString()};

      const all=readAll(); all.push(rec); writeAll(all);
      const mine=readMine(); mine.push(rec); writeMine(mine);

      summary.textContent=`‚úÖ –ó–∞–ø–∏—Å –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ: ${srv.name} ‚Ä¢ ${MASTERS[master]} ‚Ä¢ ${date} ${time} ‚Ä¢ ${fmtUAH(srv.price)}`;
      toast("–ó–∞–ø–∏—Å –∑–±–µ—Ä–µ–∂–µ–Ω–æ üéâ");
      generateSlots(date);
      e.target.reset(); serviceSel.value=srv.id; updateServiceInfo(); dateInp.value=date; generateSlots(date);
    });
  </script>
</body>
</html>
